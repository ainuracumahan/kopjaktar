<!DOCTYPE html>
<html lang="kk">
<head>
<meta charset="UTF-8">
<title>Платон денелері</title>

<style>
html, body {
  margin:0;
  padding:0;
  height:100%;
  font-family:Arial;
}

.container{
  display:flex;
  height:100vh;
}

.leftPanel{
  width:25%;
  background:#ffffff;
  padding:20px;
  box-shadow:5px 0 20px rgba(0,0,0,0.1);
  overflow:auto;

  display:flex;
  flex-direction:column;
  gap:20px;
}

.rightPanel{
  width:65%;
  position:relative;
}
</style>
</head>
<body>

<div class="container">

  <div class="leftPanel">
    <img src="images/1-top.png" width="100%">
    <img src="images/2-top.png" width="100%">
  </div>

  <div class="rightPanel" id="canvasContainer"></div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.128/examples/js/controls/OrbitControls.js"></script>

<script>

const scene = new THREE.Scene();

const camera = new THREE.PerspectiveCamera(
  60,
  1,
  0.1,
  1000
);
camera.position.set(-2, 0, 20);

// ✅ Renderer
const renderer = new THREE.WebGLRenderer({antialias:true});
const container = document.getElementById("canvasContainer");

renderer.setSize(container.clientWidth, container.clientHeight);
renderer.setClearColor(0xffffff);
container.appendChild(renderer.domElement);

// ✅ Controls (renderer-ден кейін!)
const controls = new THREE.OrbitControls(camera,renderer.domElement);
controls.enableDamping = false;
controls.target.set(0, 0, 0);
controls.update();

// Камера aspect дұрыс беру
camera.aspect = container.clientWidth / container.clientHeight;
camera.updateProjectionMatrix();


// Жарық
scene.add(new THREE.AmbientLight(0xffffff,0.8));
const light = new THREE.DirectionalLight(0xffffff,1);
light.position.set(5,10,7);
scene.add(light);

// Материал
const material = new THREE.MeshStandardMaterial({
  color:0x00aa00,
  metalness:0.2,
  roughness:0.5
});

const shapes = [];

function createShape(geometry,x,y,name,faces,edges,vertices){
  const mesh = new THREE.Mesh(geometry,material);
  mesh.position.set(x,y,0);
  mesh.userData = {name,faces,edges,vertices};
  scene.add(mesh);
  shapes.push(mesh);
}

/* -------- 1 ҚАТАР -------- */
createShape(new THREE.BoxGeometry(2,2,2), -4, 2, "Куб", 6, 12, 8);
createShape(new THREE.TetrahedronGeometry(2), 0, 2, "Тетраэдр", 4, 6, 4);
createShape(new THREE.OctahedronGeometry(2), 4, 2, "Октаэдр", 8, 12, 6);

/* -------- 2 ҚАТАР -------- */
createShape(new THREE.DodecahedronGeometry(2), -3, -4, "Додекаэдр", 12, 30, 20);
createShape(new THREE.IcosahedronGeometry(2), 3, -4, "Икосаэдр", 20, 30, 12);


// Raycaster
const raycaster = new THREE.Raycaster();
const mouse = new THREE.Vector2();

window.addEventListener("pointerdown",(event)=>{

  const rect = renderer.domElement.getBoundingClientRect();

  mouse.x = ((event.clientX - rect.left)/rect.width)*2-1;
  mouse.y = -((event.clientY - rect.top)/rect.height)*2+1;

  raycaster.setFromCamera(mouse,camera);
  const intersects = raycaster.intersectObjects(shapes);



});

// Анимация
function animate(){
  requestAnimationFrame(animate);

  shapes.forEach(s=>{
    s.rotation.y += 0.01;
  });

  controls.update();
  renderer.render(scene,camera);
}

animate();

window.addEventListener("resize",()=>{

  const container = document.getElementById("canvasContainer");

  camera.aspect = container.clientWidth / container.clientHeight;
  camera.updateProjectionMatrix();

  renderer.setSize(container.clientWidth, container.clientHeight);

});


</script>
</body>
</html>